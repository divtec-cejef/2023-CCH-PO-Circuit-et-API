generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model activite {
  id_activite Int        @id @default(autoincrement())
  nom         String?    @db.VarChar(50)
  id_section  Int
  section     section    @relation(fields: [id_section], references: [id_section], onDelete: NoAction, onUpdate: NoAction)
  realiser    realiser[]
}

model avatar {
  id_avatar Int       @id @default(autoincrement())
  image     String?   @db.VarChar(100)
  voiture   voiture[]
}

model manche {
  id_manche  Int     @id @default(autoincrement())
  num_ro     Int?    @map("num√©ro")
  id_voiture Int
  voiture    voiture @relation(fields: [id_voiture], references: [id_voiture], onDelete: NoAction, onUpdate: NoAction)
  temps      temps[]
}

model realiser {
  id_voiture  Int       @default(autoincrement())
  id_activite Int
  date_heure  DateTime? @db.Timestamp(6)
  activite    activite  @relation(fields: [id_activite], references: [id_activite], onDelete: NoAction, onUpdate: NoAction)
  voiture     voiture   @relation(fields: [id_voiture], references: [id_voiture], onDelete: NoAction, onUpdate: NoAction)

  @@id([id_voiture, id_activite])
}

model section {
  id_section Int        @id @default(autoincrement())
  nom        String?    @db.VarChar(50)
  activite   activite[]
}

model temps {
  id_temps  Int       @id @default(autoincrement())
  secteur   Int?
  temps     DateTime? @db.Time(3)
  id_manche Int
  manche    manche    @relation(fields: [id_manche], references: [id_manche], onDelete: NoAction, onUpdate: NoAction)
}

model voiture {
  id_voiture Int        @id @default(autoincrement())
  mdp        String?    @db.VarChar(50)
  url        String?    @db.VarChar(100)
  pseudo     String?    @db.VarChar(50)
  id_avatar  Int
  manche     manche[]
  realiser   realiser[]
  avatar     avatar     @relation(fields: [id_avatar], references: [id_avatar], onDelete: NoAction, onUpdate: NoAction)
}
